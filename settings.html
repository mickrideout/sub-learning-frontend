<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Settings - SubLearning</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" rel="stylesheet">
    <style>
        :root {
            --primary-color: #2563EB;
            --success-color: #10B981;
            --warning-color: #F59E0B;
            --error-color: #EF4444;
            --accent-color: #7C3AED;
            --light-bg: #F8FAFC;
            --border-color: #E2E8F0;
            --text-primary: #1E293B;
            --text-secondary: #64748B;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--light-bg);
            color: var(--text-primary);
            line-height: 1.6;
        }

        .navbar {
            background-color: white;
            border-bottom: 1px solid var(--border-color);
            padding: 1rem 0;
        }

        .navbar-brand {
            font-weight: 700;
            font-size: 1.5rem;
            color: var(--primary-color);
        }

        .nav-link {
            font-weight: 500;
            color: var(--text-secondary);
        }

        .nav-link:hover {
            color: var(--primary-color);
        }

        .breadcrumb {
            background-color: transparent;
            padding: 1rem 0;
            margin-bottom: 0;
        }

        .breadcrumb-item a {
            color: var(--primary-color);
            text-decoration: none;
        }

        .breadcrumb-item.active {
            color: var(--text-secondary);
        }

        .settings-header {
            background: white;
            border-radius: 12px;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        }

        .profile-avatar {
            width: 80px;
            height: 80px;
            background: linear-gradient(135deg, var(--primary-color), var(--accent-color));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 2rem;
            font-weight: 700;
            position: relative;
            cursor: pointer;
            transition: transform 0.2s ease;
        }

        .profile-avatar:hover {
            transform: scale(1.05);
        }

        .profile-avatar .upload-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.7);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            transition: opacity 0.2s ease;
        }

        .profile-avatar:hover .upload-overlay {
            opacity: 1;
        }

        .member-since {
            color: var(--text-secondary);
            font-size: 0.875rem;
        }

        .settings-tabs {
            background: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        }

        .nav-tabs {
            border-bottom: 1px solid var(--border-color);
            background: var(--light-bg);
        }

        .nav-tabs .nav-link {
            border: none;
            padding: 1rem 1.5rem;
            color: var(--text-secondary);
            font-weight: 500;
            border-radius: 0;
            position: relative;
        }

        .nav-tabs .nav-link:hover {
            background: white;
            color: var(--primary-color);
        }

        .nav-tabs .nav-link.active {
            background: white;
            color: var(--primary-color);
            border-bottom: 2px solid var(--primary-color);
        }

        .tab-content {
            padding: 2rem;
        }

        .card {
            border: none;
            border-radius: 12px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
            margin-bottom: 1.5rem;
        }

        .card-header {
            background: white;
            border-bottom: 1px solid var(--border-color);
            padding: 1.5rem;
            font-weight: 600;
            color: var(--text-primary);
        }

        .card-body {
            padding: 1.5rem;
        }

        .form-label {
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 0.5rem;
        }

        .form-control, .form-select {
            border: 2px solid var(--border-color);
            border-radius: 8px;
            padding: 0.75rem;
            font-weight: 500;
            transition: border-color 0.2s ease, box-shadow 0.2s ease;
        }

        .form-control:focus, .form-select:focus {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 0.2rem rgba(37, 99, 235, 0.25);
        }

        .form-control.is-valid {
            border-color: var(--success-color);
        }

        .form-control.is-invalid {
            border-color: var(--error-color);
        }

        .valid-feedback {
            color: var(--success-color);
            font-size: 0.875rem;
        }

        .invalid-feedback {
            color: var(--error-color);
            font-size: 0.875rem;
        }

        .form-check-input {
            border: 2px solid var(--border-color);
            border-radius: 4px;
        }

        .form-check-input:checked {
            background-color: var(--primary-color);
            border-color: var(--primary-color);
        }

        .form-switch .form-check-input {
            border-radius: 2rem;
            width: 3rem;
            height: 1.5rem;
        }

        .form-switch .form-check-input:checked {
            background-color: var(--success-color);
            border-color: var(--success-color);
        }

        .btn-primary {
            background-color: var(--primary-color);
            border-color: var(--primary-color);
            font-weight: 600;
            padding: 0.75rem 1.5rem;
            border-radius: 8px;
            transition: all 0.2s ease;
        }

        .btn-primary:hover {
            background-color: #1d4ed8;
            border-color: #1d4ed8;
            transform: translateY(-1px);
        }

        .btn-danger {
            background-color: var(--error-color);
            border-color: var(--error-color);
            font-weight: 600;
            padding: 0.75rem 1.5rem;
            border-radius: 8px;
        }

        .btn-danger:hover {
            background-color: #dc2626;
            border-color: #dc2626;
        }

        .btn-outline-secondary {
            border-color: var(--border-color);
            color: var(--text-secondary);
            font-weight: 500;
        }

        .btn-outline-secondary:hover {
            background-color: var(--text-secondary);
            border-color: var(--text-secondary);
        }

        .language-selector {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1rem;
            border: 2px solid var(--border-color);
            border-radius: 8px;
            background: white;
        }

        .language-selector.selected {
            border-color: var(--primary-color);
            background: rgba(37, 99, 235, 0.05);
        }

        .flag-icon {
            width: 24px;
            height: 18px;
            border-radius: 2px;
            background: var(--border-color);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.75rem;
            color: var(--text-secondary);
        }

        .text-size-preview {
            padding: 1rem;
            border: 2px solid var(--border-color);
            border-radius: 8px;
            background: #000;
            color: white;
            font-family: 'Arial', sans-serif;
            text-align: center;
            margin-top: 1rem;
            transition: font-size 0.2s ease;
        }

        .notification-item {
            display: flex;
            justify-content: between;
            align-items: center;
            padding: 1rem;
            border-bottom: 1px solid var(--border-color);
        }

        .notification-item:last-child {
            border-bottom: none;
        }

        .sidebar-nav {
            background: white;
            border-radius: 12px;
            padding: 1.5rem;
            height: fit-content;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        }

        .sidebar-nav .nav-link {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.75rem;
            color: var(--text-secondary);
            text-decoration: none;
            border-radius: 8px;
            transition: all 0.2s ease;
            margin-bottom: 0.5rem;
        }

        .sidebar-nav .nav-link:hover,
        .sidebar-nav .nav-link.active {
            background-color: rgba(37, 99, 235, 0.1);
            color: var(--primary-color);
        }

        .alert {
            border-radius: 8px;
            border: none;
            font-weight: 500;
        }

        .alert-success {
            background-color: rgba(16, 185, 129, 0.1);
            color: var(--success-color);
        }

        .alert-danger {
            background-color: rgba(239, 68, 68, 0.1);
            color: var(--error-color);
        }

        .loading {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
        }

        .spinner-border-sm {
            width: 1rem;
            height: 1rem;
        }

        @media (max-width: 768px) {
            .nav-tabs .nav-link {
                padding: 0.75rem 1rem;
                font-size: 0.875rem;
            }
            
            .tab-content {
                padding: 1rem;
            }
            
            .settings-header {
                text-align: center;
            }
            
            .profile-info {
                text-align: center;
                margin-top: 1rem;
            }

            .nav-tabs {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg">
        <div class="container">
            <a class="navbar-brand" href="index.html">
                <i class="bi bi-film"></i> SubLearning
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="index.html">Browse Movies</a>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown">
                            Alex Johnson
                        </a>
                        <ul class="dropdown-menu">
                            <li><a class="dropdown-item" href="dashboard.html"><i class="bi bi-speedometer2"></i> Dashboard</a></li>
                            <li><a class="dropdown-item" href="settings.html"><i class="bi bi-gear"></i> Settings</a></li>
                            <li><a class="dropdown-item" href="#"><i class="bi bi-question-circle"></i> Help</a></li>
                            <li><hr class="dropdown-divider"></li>
                            <li><a class="dropdown-item" href="#" onclick="logout()"><i class="bi bi-box-arrow-right"></i> Logout</a></li>
                        </ul>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Breadcrumb -->
    <div class="container">
        <nav aria-label="breadcrumb">
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><a href="dashboard.html">Dashboard</a></li>
                <li class="breadcrumb-item active" aria-current="page">Settings</li>
            </ol>
        </nav>
    </div>

    <!-- Main Content -->
    <div class="container pb-5">
        <!-- Settings Header -->
        <div class="settings-header">
            <div class="row align-items-center">
                <div class="col-auto">
                    <div class="profile-avatar" onclick="triggerFileUpload()">
                        AJ
                        <div class="upload-overlay">
                            <i class="bi bi-camera"></i>
                        </div>
                    </div>
                    <input type="file" id="profileUpload" accept="image/*" style="display: none;">
                </div>
                <div class="col profile-info">
                    <h2 class="mb-1">Alex Johnson</h2>
                    <p class="text-muted mb-1">alex.johnson@email.com</p>
                    <p class="member-since">Member since March 2024</p>
                </div>
            </div>
        </div>

        <div class="row">
            <!-- Sidebar Navigation -->
            <div class="col-12 col-lg-3 mb-4">
                <div class="sidebar-nav">
                    <h6 class="mb-3 text-uppercase text-muted small">Settings</h6>
                    <a href="#profile" class="nav-link active" data-bs-toggle="tab">
                        <i class="bi bi-person"></i>
                        <span>Profile</span>
                    </a>
                    <a href="#learning" class="nav-link" data-bs-toggle="tab">
                        <i class="bi bi-book"></i>
                        <span>Learning Preferences</span>
                    </a>
                    <a href="#account" class="nav-link" data-bs-toggle="tab">
                        <i class="bi bi-shield-check"></i>
                        <span>Account Settings</span>
                    </a>
                    <a href="#notifications" class="nav-link" data-bs-toggle="tab">
                        <i class="bi bi-bell"></i>
                        <span>Notifications</span>
                    </a>
                </div>
            </div>

            <!-- Settings Content -->
            <div class="col-12 col-lg-9">
                <div class="settings-tabs">
                    <!-- Tab Navigation (Mobile) -->
                    <ul class="nav nav-tabs d-lg-none" role="tablist">
                        <li class="nav-item" role="presentation">
                            <button class="nav-link active" data-bs-toggle="tab" data-bs-target="#profile">Profile</button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" data-bs-toggle="tab" data-bs-target="#learning">Learning</button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" data-bs-toggle="tab" data-bs-target="#account">Account</button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" data-bs-toggle="tab" data-bs-target="#notifications">Notifications</button>
                        </li>
                    </ul>

                    <!-- Tab Content -->
                    <div class="tab-content">
                        <!-- Profile Tab -->
                        <div class="tab-pane fade show active" id="profile" role="tabpanel">
                            <h3 class="mb-4">Profile Information</h3>
                            
                            <div class="card">
                                <div class="card-header">
                                    <i class="bi bi-person me-2"></i>Personal Details
                                </div>
                                <div class="card-body">
                                    <form id="profileForm">
                                        <div class="row">
                                            <div class="col-md-6 mb-3">
                                                <label for="firstName" class="form-label">First Name</label>
                                                <input type="text" class="form-control" id="firstName" value="Alex" required>
                                                <div class="valid-feedback">Looks good!</div>
                                                <div class="invalid-feedback">Please provide a valid first name.</div>
                                            </div>
                                            <div class="col-md-6 mb-3">
                                                <label for="lastName" class="form-label">Last Name</label>
                                                <input type="text" class="form-control" id="lastName" value="Johnson" required>
                                                <div class="valid-feedback">Looks good!</div>
                                                <div class="invalid-feedback">Please provide a valid last name.</div>
                                            </div>
                                        </div>
                                        <div class="mb-3">
                                            <label for="email" class="form-label">Email Address</label>
                                            <input type="email" class="form-control" id="email" value="alex.johnson@email.com" required>
                                            <div class="valid-feedback">Email format is correct!</div>
                                            <div class="invalid-feedback">Please provide a valid email address.</div>
                                        </div>
                                        <div class="d-flex gap-2">
                                            <button type="submit" class="btn btn-primary">
                                                <span class="btn-text">Save Changes</span>
                                                <span class="loading d-none">
                                                    <span class="spinner-border spinner-border-sm"></span>
                                                    Saving...
                                                </span>
                                            </button>
                                            <button type="button" class="btn btn-outline-secondary" onclick="resetForm('profileForm')">Cancel</button>
                                        </div>
                                    </form>
                                </div>
                            </div>

                            <div class="card">
                                <div class="card-header">
                                    <i class="bi bi-shield-lock me-2"></i>Change Password
                                </div>
                                <div class="card-body">
                                    <form id="passwordForm">
                                        <div class="mb-3">
                                            <label for="currentPassword" class="form-label">Current Password</label>
                                            <input type="password" class="form-control" id="currentPassword" required>
                                            <div class="invalid-feedback">Please enter your current password.</div>
                                        </div>
                                        <div class="mb-3">
                                            <label for="newPassword" class="form-label">New Password</label>
                                            <input type="password" class="form-control" id="newPassword" required>
                                            <div class="form-text">Password must be at least 8 characters long.</div>
                                            <div class="invalid-feedback">Password must be at least 8 characters long.</div>
                                        </div>
                                        <div class="mb-3">
                                            <label for="confirmPassword" class="form-label">Confirm New Password</label>
                                            <input type="password" class="form-control" id="confirmPassword" required>
                                            <div class="invalid-feedback">Passwords do not match.</div>
                                        </div>
                                        <button type="submit" class="btn btn-primary">Update Password</button>
                                    </form>
                                </div>
                            </div>
                        </div>

                        <!-- Learning Preferences Tab -->
                        <div class="tab-pane fade" id="learning" role="tabpanel">
                            <h3 class="mb-4">Learning Preferences</h3>
                            
                            <div class="card">
                                <div class="card-header">
                                    <i class="bi bi-translate me-2"></i>Default Language Pair
                                </div>
                                <div class="card-body">
                                    <div class="row">
                                        <div class="col-md-5 mb-3">
                                            <label class="form-label">From Language</label>
                                            <div class="language-selector selected" data-lang="english">
                                                <div class="flag-icon">ðŸ‡ºðŸ‡¸</div>
                                                <div class="flex-grow-1">
                                                    <div class="fw-semibold">English</div>
                                                    <small class="text-muted">Your native language</small>
                                                </div>
                                                <i class="bi bi-check-circle text-primary"></i>
                                            </div>
                                        </div>
                                        <div class="col-md-2 d-flex align-items-center justify-content-center">
                                            <i class="bi bi-arrow-right text-muted" style="font-size: 1.5rem;"></i>
                                        </div>
                                        <div class="col-md-5 mb-3">
                                            <label class="form-label">To Language</label>
                                            <div class="language-selector selected" data-lang="spanish">
                                                <div class="flag-icon">ðŸ‡ªðŸ‡¸</div>
                                                <div class="flex-grow-1">
                                                    <div class="fw-semibold">Spanish</div>
                                                    <small class="text-muted">Learning language</small>
                                                </div>
                                                <i class="bi bi-check-circle text-primary"></i>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-12">
                                            <label class="form-label">Other Available Languages</label>
                                            <div class="row">
                                                <div class="col-md-4 mb-2">
                                                    <div class="language-selector" data-lang="french">
                                                        <div class="flag-icon">ðŸ‡«ðŸ‡·</div>
                                                        <div class="flex-grow-1">
                                                            <div class="fw-semibold">French</div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-md-4 mb-2">
                                                    <div class="language-selector" data-lang="german">
                                                        <div class="flag-icon">ðŸ‡©ðŸ‡ª</div>
                                                        <div class="flex-grow-1">
                                                            <div class="fw-semibold">German</div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-md-4 mb-2">
                                                    <div class="language-selector" data-lang="italian">
                                                        <div class="flag-icon">ðŸ‡®ðŸ‡¹</div>
                                                        <div class="flex-grow-1">
                                                            <div class="fw-semibold">Italian</div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="card">
                                <div class="card-header">
                                    <i class="bi bi-gear me-2"></i>Session Settings
                                </div>
                                <div class="card-body">
                                    <form id="learningForm">
                                        <div class="row">
                                            <div class="col-md-6 mb-3">
                                                <label for="sessionLength" class="form-label">Preferred Session Length</label>
                                                <select class="form-select" id="sessionLength">
                                                    <option value="10">10 minutes</option>
                                                    <option value="20" selected>20 minutes</option>
                                                    <option value="30">30 minutes</option>
                                                    <option value="45">45 minutes</option>
                                                    <option value="60">1 hour</option>
                                                </select>
                                            </div>
                                            <div class="col-md-6 mb-3">
                                                <label for="textSize" class="form-label">Subtitle Text Size</label>
                                                <select class="form-select" id="textSize" onchange="updateTextPreview()">
                                                    <option value="small">Small</option>
                                                    <option value="medium" selected>Medium</option>
                                                    <option value="large">Large</option>
                                                    <option value="extra-large">Extra Large</option>
                                                </select>
                                            </div>
                                        </div>
                                        
                                        <div class="mb-3">
                                            <label class="form-label">Subtitle Preview</label>
                                            <div class="text-size-preview" id="textPreview">
                                                Hello, how are you today? â€¢ Hola, Â¿cÃ³mo estÃ¡s hoy?
                                            </div>
                                        </div>

                                        <div class="row">
                                            <div class="col-md-6 mb-3">
                                                <div class="form-check form-switch">
                                                    <input class="form-check-input" type="checkbox" id="autoAdvance" checked>
                                                    <label class="form-check-label fw-semibold" for="autoAdvance">
                                                        Auto-advance to next scene
                                                    </label>
                                                    <div class="form-text">Automatically move to the next scene after completion</div>
                                                </div>
                                            </div>
                                            <div class="col-md-6 mb-3">
                                                <div class="form-check form-switch">
                                                    <input class="form-check-input" type="checkbox" id="pauseOnUnknown">
                                                    <label class="form-check-label fw-semibold" for="pauseOnUnknown">
                                                        Pause on unknown words
                                                    </label>
                                                    <div class="form-text">Automatically pause when encountering new vocabulary</div>
                                                </div>
                                            </div>
                                        </div>

                                        <button type="submit" class="btn btn-primary">Save Learning Preferences</button>
                                    </form>
                                </div>
                            </div>
                        </div>

                        <!-- Account Settings Tab -->
                        <div class="tab-pane fade" id="account" role="tabpanel">
                            <h3 class="mb-4">Account Settings</h3>
                            
                            <div class="card">
                                <div class="card-header">
                                    <i class="bi bi-envelope me-2"></i>Email Preferences
                                </div>
                                <div class="card-body">
                                    <form id="emailForm">
                                        <div class="form-check form-switch mb-3">
                                            <input class="form-check-input" type="checkbox" id="emailUpdates" checked>
                                            <label class="form-check-label fw-semibold" for="emailUpdates">
                                                Product updates and announcements
                                            </label>
                                            <div class="form-text">Receive emails about new features and improvements</div>
                                        </div>
                                        <div class="form-check form-switch mb-3">
                                            <input class="form-check-input" type="checkbox" id="emailTips" checked>
                                            <label class="form-check-label fw-semibold" for="emailTips">
                                                Learning tips and recommendations
                                            </label>
                                            <div class="form-text">Get personalized learning advice via email</div>
                                        </div>
                                        <div class="form-check form-switch mb-3">
                                            <input class="form-check-input" type="checkbox" id="emailMarketing">
                                            <label class="form-check-label fw-semibold" for="emailMarketing">
                                                Marketing communications
                                            </label>
                                            <div class="form-text">Promotional content and special offers</div>
                                        </div>
                                        <button type="submit" class="btn btn-primary">Update Email Preferences</button>
                                    </form>
                                </div>
                            </div>

                            <div class="card">
                                <div class="card-header">
                                    <i class="bi bi-shield-lock me-2"></i>Privacy Settings
                                </div>
                                <div class="card-body">
                                    <form id="privacyForm">
                                        <div class="form-check form-switch mb-3">
                                            <input class="form-check-input" type="checkbox" id="profilePublic">
                                            <label class="form-check-label fw-semibold" for="profilePublic">
                                                Make profile visible to other users
                                            </label>
                                            <div class="form-text">Allow other learners to see your progress and achievements</div>
                                        </div>
                                        <div class="form-check form-switch mb-3">
                                            <input class="form-check-input" type="checkbox" id="analyticsOptOut" checked>
                                            <label class="form-check-label fw-semibold" for="analyticsOptOut">
                                                Allow usage analytics
                                            </label>
                                            <div class="form-text">Help improve SubLearning by sharing anonymous usage data</div>
                                        </div>
                                        <button type="submit" class="btn btn-primary">Update Privacy Settings</button>
                                    </form>
                                </div>
                            </div>

                            <div class="card">
                                <div class="card-header">
                                    <i class="bi bi-download me-2"></i>Data Management
                                </div>
                                <div class="card-body">
                                    <div class="row">
                                        <div class="col-md-6 mb-3">
                                            <h6>Export Your Data</h6>
                                            <p class="text-muted small">Download all your learning data, progress, and account information.</p>
                                            <button class="btn btn-outline-primary" onclick="exportData()">
                                                <i class="bi bi-download"></i> Export Data
                                            </button>
                                        </div>
                                        <div class="col-md-6 mb-3">
                                            <h6 class="text-danger">Delete Account</h6>
                                            <p class="text-muted small">Permanently delete your account and all associated data. This action cannot be undone.</p>
                                            <button class="btn btn-danger" onclick="showDeleteConfirmation()">
                                                <i class="bi bi-trash"></i> Delete Account
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Notifications Tab -->
                        <div class="tab-pane fade" id="notifications" role="tabpanel">
                            <h3 class="mb-4">Notification Settings</h3>
                            
                            <div class="card">
                                <div class="card-header">
                                    <i class="bi bi-bell me-2"></i>Learning Reminders
                                </div>
                                <div class="card-body">
                                    <form id="reminderForm">
                                        <div class="form-check form-switch mb-3">
                                            <input class="form-check-input" type="checkbox" id="dailyReminders" checked>
                                            <label class="form-check-label fw-semibold" for="dailyReminders">
                                                Daily learning reminders
                                            </label>
                                            <div class="form-text">Get reminded to practice at your preferred time</div>
                                        </div>
                                        
                                        <div class="row" id="reminderTime">
                                            <div class="col-md-6 mb-3">
                                                <label for="reminderHour" class="form-label">Reminder Time</label>
                                                <select class="form-select" id="reminderHour">
                                                    <option value="7">7:00 AM</option>
                                                    <option value="12">12:00 PM</option>
                                                    <option value="17">5:00 PM</option>
                                                    <option value="19" selected>7:00 PM</option>
                                                    <option value="21">9:00 PM</option>
                                                </select>
                                            </div>
                                            <div class="col-md-6 mb-3">
                                                <label for="reminderDays" class="form-label">Reminder Days</label>
                                                <select class="form-select" id="reminderDays">
                                                    <option value="daily" selected>Every day</option>
                                                    <option value="weekdays">Weekdays only</option>
                                                    <option value="weekends">Weekends only</option>
                                                    <option value="custom">Custom schedule</option>
                                                </select>
                                            </div>
                                        </div>

                                        <div class="form-check form-switch mb-3">
                                            <input class="form-check-input" type="checkbox" id="streakReminders" checked>
                                            <label class="form-check-label fw-semibold" for="streakReminders">
                                                Streak loss warnings
                                            </label>
                                            <div class="form-text">Get notified when your learning streak is at risk</div>
                                        </div>

                                        <button type="submit" class="btn btn-primary">Save Reminder Settings</button>
                                    </form>
                                </div>
                            </div>

                            <div class="card">
                                <div class="card-header">
                                    <i class="bi bi-trophy me-2"></i>Achievement Notifications
                                </div>
                                <div class="card-body">
                                    <form id="achievementForm">
                                        <div class="notification-item">
                                            <div class="flex-grow-1">
                                                <div class="fw-semibold">Movie completion badges</div>
                                                <div class="text-muted small">When you finish watching a movie</div>
                                            </div>
                                            <div class="form-check form-switch">
                                                <input class="form-check-input" type="checkbox" id="movieBadges" checked>
                                            </div>
                                        </div>
                                        <div class="notification-item">
                                            <div class="flex-grow-1">
                                                <div class="fw-semibold">Learning milestones</div>
                                                <div class="text-muted small">Hours watched, movies completed, etc.</div>
                                            </div>
                                            <div class="form-check form-switch">
                                                <input class="form-check-input" type="checkbox" id="milestones" checked>
                                            </div>
                                        </div>
                                        <div class="notification-item">
                                            <div class="flex-grow-1">
                                                <div class="fw-semibold">Streak achievements</div>
                                                <div class="text-muted small">Weekly and monthly streak rewards</div>
                                            </div>
                                            <div class="form-check form-switch">
                                                <input class="form-check-input" type="checkbox" id="streakAchievements" checked>
                                            </div>
                                        </div>
                                        <div class="mt-3">
                                            <button type="submit" class="btn btn-primary">Save Achievement Settings</button>
                                        </div>
                                    </form>
                                </div>
                            </div>

                            <div class="card">
                                <div class="card-header">
                                    <i class="bi bi-envelope me-2"></i>Email Notifications
                                </div>
                                <div class="card-body">
                                    <form id="emailNotificationForm">
                                        <div class="notification-item">
                                            <div class="flex-grow-1">
                                                <div class="fw-semibold">Weekly progress summary</div>
                                                <div class="text-muted small">Summary of your learning progress each week</div>
                                            </div>
                                            <div class="form-check form-switch">
                                                <input class="form-check-input" type="checkbox" id="weeklyEmail" checked>
                                            </div>
                                        </div>
                                        <div class="notification-item">
                                            <div class="flex-grow-1">
                                                <div class="fw-semibold">New movie recommendations</div>
                                                <div class="text-muted small">When new movies are added to your language pair</div>
                                            </div>
                                            <div class="form-check form-switch">
                                                <input class="form-check-input" type="checkbox" id="newMovieEmail">
                                            </div>
                                        </div>
                                        <div class="notification-item">
                                            <div class="flex-grow-1">
                                                <div class="fw-semibold">Platform updates</div>
                                                <div class="text-muted small">Important updates and new features</div>
                                            </div>
                                            <div class="form-check form-switch">
                                                <input class="form-check-input" type="checkbox" id="updateEmail" checked>
                                            </div>
                                        </div>
                                        <div class="mt-3">
                                            <button type="submit" class="btn btn-primary">Save Email Settings</button>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Delete Account Confirmation Modal -->
    <div class="modal fade" id="deleteAccountModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header border-0">
                    <h5 class="modal-title text-danger">
                        <i class="bi bi-exclamation-triangle me-2"></i>Delete Account
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <p class="mb-3">Are you sure you want to delete your account? This action will:</p>
                    <ul class="text-muted">
                        <li>Permanently delete all your learning progress</li>
                        <li>Remove all your watched movies and achievements</li>
                        <li>Delete your account information and preferences</li>
                        <li>Cancel any active subscriptions</li>
                    </ul>
                    <div class="alert alert-danger">
                        <strong>This action cannot be undone!</strong>
                    </div>
                    <div class="mb-3">
                        <label for="deleteConfirmation" class="form-label">Type "DELETE" to confirm:</label>
                        <input type="text" class="form-control" id="deleteConfirmation" placeholder="DELETE">
                    </div>
                </div>
                <div class="modal-footer border-0">
                    <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-danger" id="confirmDeleteBtn" disabled onclick="deleteAccount()">
                        Delete My Account
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Success/Error Alerts -->
    <div id="alertContainer" style="position: fixed; top: 20px; right: 20px; z-index: 1050; max-width: 300px;"></div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Initialize page
        document.addEventListener('DOMContentLoaded', function() {
            setupFormValidation();
            setupLanguageSelectors();
            setupTabSynchronization();
            setupReminderToggle();
            setupDeleteConfirmation();
            updateTextPreview();
        });

        // Form validation setup
        function setupFormValidation() {
            const forms = document.querySelectorAll('form');
            forms.forEach(form => {
                form.addEventListener('submit', function(e) {
                    e.preventDefault();
                    validateAndSubmitForm(this);
                });

                // Real-time validation
                const inputs = form.querySelectorAll('input[required]');
                inputs.forEach(input => {
                    input.addEventListener('blur', () => validateInput(input));
                    input.addEventListener('input', () => clearValidation(input));
                });
            });

            // Password confirmation validation
            const confirmPassword = document.getElementById('confirmPassword');
            if (confirmPassword) {
                confirmPassword.addEventListener('input', validatePasswordMatch);
            }
        }

        function validateInput(input) {
            const isValid = input.checkValidity();
            if (input.type === 'email') {
                const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                const emailValid = emailRegex.test(input.value);
                updateInputValidation(input, emailValid);
            } else if (input.type === 'password' && input.id === 'newPassword') {
                const passwordValid = input.value.length >= 8;
                updateInputValidation(input, passwordValid);
            } else {
                updateInputValidation(input, isValid);
            }
        }

        function validatePasswordMatch() {
            const newPassword = document.getElementById('newPassword');
            const confirmPassword = document.getElementById('confirmPassword');
            const isMatch = newPassword.value === confirmPassword.value;
            updateInputValidation(confirmPassword, isMatch);
        }

        function updateInputValidation(input, isValid) {
            input.classList.remove('is-valid', 'is-invalid');
            if (input.value.trim() !== '') {
                input.classList.add(isValid ? 'is-valid' : 'is-invalid');
            }
        }

        function clearValidation(input) {
            input.classList.remove('is-valid', 'is-invalid');
        }

        function validateAndSubmitForm(form) {
            let isValid = true;
            const inputs = form.querySelectorAll('input[required]');
            
            inputs.forEach(input => {
                validateInput(input);
                if (!input.checkValidity() || input.classList.contains('is-invalid')) {
                    isValid = false;
                }
            });

            if (isValid) {
                submitForm(form);
            } else {
                showAlert('Please correct the errors in the form', 'danger');
            }
        }

        function submitForm(form) {
            const submitBtn = form.querySelector('button[type="submit"]');
            const btnText = submitBtn.querySelector('.btn-text');
            const loading = submitBtn.querySelector('.loading');
            
            // Show loading state
            if (btnText && loading) {
                btnText.classList.add('d-none');
                loading.classList.remove('d-none');
            }
            submitBtn.disabled = true;

            // Simulate API call
            setTimeout(() => {
                // Reset button state
                if (btnText && loading) {
                    btnText.classList.remove('d-none');
                    loading.classList.add('d-none');
                }
                submitBtn.disabled = false;

                // Show success message
                const formName = form.id.replace('Form', '');
                showAlert(`${formName.charAt(0).toUpperCase() + formName.slice(1)} settings saved successfully!`, 'success');
            }, 1500);
        }

        // Language selector functionality
        function setupLanguageSelectors() {
            const selectors = document.querySelectorAll('.language-selector');
            selectors.forEach(selector => {
                selector.addEventListener('click', function() {
                    const isFromLang = this.closest('.col-md-5').querySelector('.form-label').textContent.includes('From');
                    
                    if (isFromLang) {
                        document.querySelectorAll('.col-md-5:first-child .language-selector').forEach(s => {
                            s.classList.remove('selected');
                            s.querySelector('.bi-check-circle')?.remove();
                        });
                    } else {
                        document.querySelectorAll('.col-md-5:last-child .language-selector').forEach(s => {
                            s.classList.remove('selected');
                            s.querySelector('.bi-check-circle')?.remove();
                        });
                    }
                    
                    this.classList.add('selected');
                    if (!this.querySelector('.bi-check-circle')) {
                        this.appendChild(document.createElement('i'));
                        this.lastChild.className = 'bi bi-check-circle text-primary';
                    }
                });
            });
        }

        // Tab synchronization between sidebar and mobile tabs
        function setupTabSynchronization() {
            const sidebarLinks = document.querySelectorAll('.sidebar-nav .nav-link');
            const mobileTabLinks = document.querySelectorAll('.nav-tabs .nav-link');
            
            sidebarLinks.forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    const target = this.getAttribute('href').substring(1);
                    
                    // Update sidebar active state
                    sidebarLinks.forEach(l => l.classList.remove('active'));
                    this.classList.add('active');
                    
                    // Update mobile tab active state
                    mobileTabLinks.forEach(l => l.classList.remove('active'));
                    const mobileTab = document.querySelector(`.nav-tabs [data-bs-target="#${target}"]`);
                    if (mobileTab) mobileTab.classList.add('active');
                    
                    // Show tab content
                    const tabs = document.querySelectorAll('.tab-pane');
                    tabs.forEach(tab => {
                        tab.classList.remove('show', 'active');
                    });
                    document.getElementById(target).classList.add('show', 'active');
                });
            });

            mobileTabLinks.forEach(link => {
                link.addEventListener('click', function() {
                    const target = this.getAttribute('data-bs-target').substring(1);
                    
                    // Update sidebar active state
                    sidebarLinks.forEach(l => l.classList.remove('active'));
                    const sidebarLink = document.querySelector(`.sidebar-nav [href="#${target}"]`);
                    if (sidebarLink) sidebarLink.classList.add('active');
                });
            });
        }

        // Reminder toggle functionality
        function setupReminderToggle() {
            const dailyReminders = document.getElementById('dailyReminders');
            const reminderTime = document.getElementById('reminderTime');
            
            function toggleReminderTime() {
                if (dailyReminders.checked) {
                    reminderTime.style.display = 'block';
                } else {
                    reminderTime.style.display = 'none';
                }
            }
            
            dailyReminders.addEventListener('change', toggleReminderTime);
            toggleReminderTime(); // Initial state
        }

        // Delete confirmation setup
        function setupDeleteConfirmation() {
            const deleteInput = document.getElementById('deleteConfirmation');
            const confirmBtn = document.getElementById('confirmDeleteBtn');
            
            deleteInput.addEventListener('input', function() {
                confirmBtn.disabled = this.value !== 'DELETE';
            });
        }

        // Text size preview
        function updateTextPreview() {
            const textSize = document.getElementById('textSize').value;
            const preview = document.getElementById('textPreview');
            
            const sizes = {
                'small': '14px',
                'medium': '18px',
                'large': '24px',
                'extra-large': '32px'
            };
            
            preview.style.fontSize = sizes[textSize];
        }

        // Utility functions
        function showAlert(message, type) {
            const alertContainer = document.getElementById('alertContainer');
            const alertDiv = document.createElement('div');
            alertDiv.className = `alert alert-${type} alert-dismissible fade show`;
            alertDiv.innerHTML = `
                <i class="bi bi-${type === 'success' ? 'check-circle' : 'exclamation-triangle'} me-2"></i>
                ${message}
                <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
            `;
            
            alertContainer.appendChild(alertDiv);
            
            // Auto-remove after 5 seconds
            setTimeout(() => {
                if (alertDiv.parentNode) {
                    alertDiv.remove();
                }
            }, 5000);
        }

        function resetForm(formId) {
            const form = document.getElementById(formId);
            form.reset();
            
            // Clear validation classes
            const inputs = form.querySelectorAll('input');
            inputs.forEach(input => {
                input.classList.remove('is-valid', 'is-invalid');
            });
        }

        function triggerFileUpload() {
            document.getElementById('profileUpload').click();
        }

        function showDeleteConfirmation() {
            const modal = new bootstrap.Modal(document.getElementById('deleteAccountModal'));
            modal.show();
        }

        function deleteAccount() {
            const confirmation = document.getElementById('deleteConfirmation').value;
            if (confirmation === 'DELETE') {
                showAlert('Account deletion initiated. You will receive a confirmation email.', 'success');
                bootstrap.Modal.getInstance(document.getElementById('deleteAccountModal')).hide();
                
                // In a real app, this would call the delete API
                setTimeout(() => {
                    alert('Redirecting to homepage...');
                    window.location.href = 'index.html';
                }, 2000);
            }
        }

        function exportData() {
            showAlert('Data export started. Download link will be sent to your email.', 'success');
            
            // Simulate data export
            setTimeout(() => {
                const link = document.createElement('a');
                link.href = 'data:application/json;charset=utf-8,' + encodeURIComponent(JSON.stringify({
                    user: 'Alex Johnson',
                    email: 'alex.johnson@email.com',
                    joinDate: '2024-03-01',
                    moviesCompleted: 3,
                    hoursLearned: 12.5,
                    currentStreak: 7
                }));
                link.download = 'sublearning-data-export.json';
                link.click();
            }, 1000);
        }

        function logout() {
            if (confirm('Are you sure you want to logout?')) {
                showAlert('Logging out...', 'success');
                setTimeout(() => {
                    window.location.href = 'index.html';
                }, 1000);
            }
        }

        // Profile upload handling
        document.getElementById('profileUpload').addEventListener('change', function(e) {
            const file = e.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    const avatar = document.querySelector('.profile-avatar');
                    avatar.style.backgroundImage = `url(${e.target.result})`;
                    avatar.style.backgroundSize = 'cover';
                    avatar.style.backgroundPosition = 'center';
                    avatar.textContent = '';
                    showAlert('Profile picture updated successfully!', 'success');
                };
                reader.readAsDataURL(file);
            }
        });
    </script>
</body>
</html>